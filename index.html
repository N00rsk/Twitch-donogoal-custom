<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Stream Goal Template</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00f2ff; --bg: #0f0f12; --card: #1a1a1f; --accent: #ff0000; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); color: #e0e0e0; line-height: 1.6; padding: 20px; margin: 0; }
        .container { max-width: 1000px; margin: auto; padding: 20px; }
        
        h1 { color: var(--primary); text-align: center; font-size: 2.5rem; margin-bottom: 10px; }
        h2 { color: var(--primary); margin-top: 40px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        p.subtitle { text-align: center; opacity: 0.7; margin-bottom: 40px; }

        /* Demo Section */
        .demo-container { background: #000; padding: 60px 20px; border-radius: 20px; border: 1px solid #333; margin-bottom: 40px; display: flex; flex-direction: column; align-items: center; }
        #goal-wrapper { width: 600px; padding: 12px 20px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; }
        .header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .bar-bg { width: 100%; height: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 5px; overflow: hidden; }
        .bar-fill { height: 100%; width: 45%; background: linear-gradient(90deg, #00f2ff, #0072ff); transition: width 1s ease; }
        
        /* Alert Effects */
        .dono-alert { border-color: var(--accent) !important; box-shadow: 0 0 30px rgba(255, 0, 0, 0.8) !important; }
        .rainbow-flash { animation: rainbow-anim 0.2s infinite; }
        @keyframes rainbow-anim { 0% { background: #ff0000; } 40% { background: #0000ff; } 80% { background: #00ff00; } 100% { background: #ffff00; } }

        .btn-test { background: var(--primary); color: #000; border: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px; transition: 0.2s; }
        .btn-test:hover { background: #fff; transform: translateY(-2px); }

        /* Guide Section */
        .guide-step { background: var(--card); padding: 20px; border-radius: 12px; margin-bottom: 15px; border-left: 5px solid var(--primary); }
        .guide-step span { color: var(--primary); font-weight: bold; margin-right: 10px; }

        /* Code Block Styling */
        .code-block { background: var(--card); border-radius: 12px; margin-bottom: 30px; border: 1px solid #333; overflow: hidden; }
        .code-header { padding: 10px 20px; background: #25252b; display: flex; justify-content: space-between; align-items: center; }
        .copy-btn { background: transparent; border: 1px solid var(--primary); color: var(--primary); padding: 5px 12px; border-radius: 5px; cursor: pointer; transition: 0.2s; }
        .copy-btn:hover { background: var(--primary); color: #000; }
        pre { margin: 0; padding: 20px; overflow-x: auto; }
    </style>
</head>
<body>

<div class="container">
    <h1>游 Custom Stream Goal</h1>
    <p class="subtitle">En profesjonell, minimalistisk donasjonsm친ler med visuelle varsler.</p>

    <div class="demo-container">
        <div id="goal-wrapper">
            <div class="header-row">
                <div style="font-weight:600; font-size:14px; text-transform:uppercase;">DITT DONOGOAL HER</div>
                <div style="font-weight:600; font-size:16px;">450<span>kr</span> <span style="opacity:0.3; margin:0 8px;">/</span> 1000<span>kr</span></div>
            </div>
            <div class="bar-bg"><div id="bar-fill-demo" class="bar-fill"></div></div>
        </div>
        <button class="btn-test" onclick="simulate()">TEST DONASJONS-EFFEKT</button>
    </div>

    <h2>游닀 Installasjonsguide</h2>
    <div class="guide-step"><span>1.</span> G친 til <strong>StreamElements Dashboard</strong> -> <strong>Streaming Tools</strong> -> <strong>Overlays</strong>.</div>
    <div class="guide-step"><span>2.</span> Lag et nytt overlay (1080p) og trykk p친 den bl친 <strong>"+"</strong> knappen.</div>
    <div class="guide-step"><span>3.</span> Velg <strong>Static/Custom</strong> -> <strong>Custom Widget</strong>.</div>
    <div class="guide-step"><span>4.</span> Trykk p친 <strong>Settings</strong>-fanen i menyen til venstre, og velg den bl친 knappen <strong>"Open Editor"</strong>.</div>
    <div class="guide-step"><span>5.</span> Kopier koden fra de fire boksene nedenfor og lim dem inn i de respektive fanene (HTML, CSS, JS, FIELDS).</div>
    <div class="guide-step"><span>6.</span> Trykk <strong>Done</strong> og <strong>Save</strong>. N친 kan du endre tittel og bel칮p i StreamElements-menyen!</div>

    <h2>游눹 Kopier kode</h2>

    <div class="code-block">
        <div class="code-header"><span>1. HTML</span><button class="copy-btn" onclick="copy('html-c')">Kopier</button></div>
        <pre><code id="html-c" class="language-html">&lt;div id="goal-wrapper"&gt;
    &lt;div class="header-row"&gt;
        &lt;div class="title"&gt;{{goal_title}}&lt;/div&gt;
        &lt;div class="amount-container"&gt;
            &lt;span id="current-text"&gt;0&lt;/span&gt;&lt;span class="currency"&gt;kr&lt;/span&gt;
            &lt;span class="divider"&gt;/&lt;/span&gt;
            &lt;span id="target-text"&gt;{{goal_amount}}&lt;/span&gt;&lt;span class="currency"&gt;kr&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="bar-bg"&gt;
        &lt;div id="bar-fill-element" class="bar-fill"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
    </div>

    <div class="code-block">
        <div class="code-header"><span>2. CSS</span><button class="copy-btn" onclick="copy('css-c')">Kopier</button></div>
        <pre><code id="css-c" class="language-css">@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;600&display=swap');
#goal-wrapper { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 600px; padding: 12px 20px; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 12px; font-family: 'Outfit', sans-serif; color: white; }
.header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.title { font-weight: 600; font-size: 14px; text-transform: uppercase; }
.bar-bg { width: 100%; height: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 5px; overflow: hidden; }
.bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, #00f2ff, #0072ff); transition: width 1s ease; }
.dono-alert { border-color: #ff0000 !important; box-shadow: 0 0 30px rgba(255, 0, 0, 0.8) !important; }
.rainbow-flash { animation: rainbow-anim 0.2s infinite; }
@keyframes rainbow-anim { 0% { background: #ff0000; } 40% { background: #0000ff; } 80% { background: #00ff00; } 100% { background: #ffff00; } }</code></pre>
    </div>

    <div class="code-block">
        <div class="code-header"><span>3. JAVASCRIPT</span><button class="copy-btn" onclick="copy('js-c')">Kopier</button></div>
        <pre><code id="js-c" class="language-javascript">let goalTarget = 0; let currentTotal = 0;
window.addEventListener('onWidgetLoad', function (obj) {
    goalTarget = obj.detail.fieldData.goal_amount || 1000;
    currentTotal = obj.detail.session.data['tips-session']['amount'] || 0;
    document.getElementById('target-text').innerText = goalTarget;
    render(false);
});
window.addEventListener('onEventReceived', function (obj) {
    if (obj.detail.listener === 'tip-latest') {
        currentTotal += parseFloat(obj.detail.event.amount);
        render(true);
    }
});
function render(isDono) {
    const percent = Math.min((currentTotal / goalTarget) * 100, 100);
    const bar = document.getElementById('bar-fill-element');
    const wrap = document.getElementById('goal-wrapper');
    if (bar) bar.style.width = percent + "%";
    document.getElementById('current-text').innerText = Math.floor(currentTotal);
    if (isDono) {
        wrap.classList.add('dono-alert'); bar.classList.add('rainbow-flash');
        setTimeout(() => { wrap.classList.remove('dono-alert'); bar.classList.remove('rainbow-flash'); }, 3000);
    }
}</code></pre>
    </div>

    <div class="code-block">
        <div class="code-header"><span>4. FIELDS (JSON)</span><button class="copy-btn" onclick="copy('json-c')">Kopier</button></div>
        <pre><code id="json-c" class="language-json">{
  "goal_title": { "type": "text", "label": "M친l Tittel", "value": "DITT DONOGOAL HER" },
  "goal_amount": { "type": "number", "label": "M친l Bel칮p (kr)", "value": 1000 }
}</code></pre>
    </div>
</div>

<script>
    function simulate() {
        const wrap = document.getElementById('goal-wrapper');
        const bar = document.getElementById('bar-fill-demo');
        wrap.classList.add('dono-alert'); bar.classList.add('rainbow-flash');
        setTimeout(() => { wrap.classList.remove('dono-alert'); bar.classList.remove('rainbow-flash'); }, 3000);
    }
    function copy(id) {
        const text = document.getElementById(id).innerText;
        navigator.clipboard.writeText(text);
        alert("Kopiert!");
    }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
</body>
</html>
